import FWCore.ParameterSet.Config as cms


process = cms.Process('test')
process.load('Configuration.StandardSequences.MagneticField_AutoFromDBCurrent_cff')
process.load('Configuration.Geometry.GeometryIdeal_cff')
process.load("Configuration.StandardSequences.Reconstruction_cff")
process.load('Ponia.Configuration.MuonSelection')
process.load('Ponia.Modules.dimuonCandProducer_cfi')
process.load('MuonAnalysis.MuonAssociators.patMuonsWithTrigger_cff')
process.load('Configuration.StandardSequences.FrontierConditions_GlobalTag_cff')
process.GlobalTag.globaltag = cms.string('GR_E_V31::All')


process.source = cms.Source(
    
    "PoolSource",
    fileNames = cms.untracked.vstring('file:/data1/vcogoni/CMSSW_5_3_6/store/data/Run2012A/MuOnia/AOD/13Jul2012-v1/00000/FE7159F0-33CF-E111-A303-002618FDA279.root')
    )

process.maxEvents = cms.untracked.PSet(
    input = cms.untracked.int32(-1)
    )




process.selMuons = process.muonSelection2012.clone()


process.out = cms.OutputModule(
    "PoolOutputModule",
    fileName = cms.untracked.string('testdimuon.root'),
    outputCommands =  cms.untracked.vstring('drop *',
                                            'keep *_dimuon_*_*',
                                            ),
    #SelectEvents = cms.untracked.PSet(
    #SelectEvents = cms.vstring('')
    #)
    )



process.load('PhysicsTools.PatAlgos.producersLayer1.muonProducer_cfi')

process.dimuonpath = cms.Path(process.patMuons*   #create PAT muons
                              process.selMuons*   #official muon selection
                              process.dimuon)     #dimuon producer

process.end        = cms.EndPath(process.out)

process.schedule = cms.Schedule(process.dimuonpath,process.end)

# HACK ! Need to understand !
process.dimuon.addMuonlessPrimaryVertex = False
